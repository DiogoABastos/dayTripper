<div class="show-page">
  <div class="row">
    <div class="col-5 window-view">

        <div class="itinerary-details d-flex">
          <h2 id="itinerary-name"><%= @itinerary.name %> </h2>
          <a href="#" id="review-button">
            <% if current_user %>
             <%= rating(@itinerary.reviews) %>
            <% end %>
          </a>
        </div>

    <% if !user_signed_in? || current_user.id != @itinerary.user_id %>
      <div>
        <%= render 'itinerary_details', itinerary: @itinerary, location: @location %>
      </div>
      <% else %>
      <div class="location-form" id="ajax-location-form">
        <%= render 'location_form', itinerary: @itinerary, location: @location %>
      </div>
    <% end %>

    <%= render 'horizontal_navbar' %>
  <br>
    <div id="location-cards">
      <% @itinerary.locations.each do |location| %>
        <%= link_to itinerary_location_path(@itinerary, location) do %>

        <%= render 'location', itinerary: @itinerary, location: location %>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="col-7 p-0">
    <div
    id="map" class="itinerary-locations-map the-map"
    style="width: 100%;
    height: 98vh;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
    <div class="review-form" id="ajax-review-form">
      <%= render 'review_form', itinerary: @itinerary, review: @review %>
    </div>
    <div id="review-show" class="review-cards">
      <h4><%= @itinerary.name.capitalize %> Reviews</h4>
        <%= render 'review_rating', itinerary: @itinerary %>
      <div class="review-cards-five">
        <% @reviews.last(5).reverse.each do |review| %>
          <%= render 'review', review: review %>
        <% end %>
      </div>
    </div>
  </div>
</div>


