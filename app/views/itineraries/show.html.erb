<h1>Show page</h1>

<% if policy(Location).create? %>
 <%= link_to 'âž• Add locations', new_itinerary_location_path(@itinerary) %>
<% end %>

<div class="row">
  <div class="col-4">
    <h2><%= @itinerary.name %>
    <% if policy(@itinerary).destroy? %>
      (<%= link_to 'âœŽ', edit_itinerary_path(@itinerary) %>)
    <% end %>
    </h2>
    <hr>
    <ol>
      <% @itinerary.locations.each do |location| %>
        <li>
          <%= link_to location.name, itinerary_location_path(@itinerary, location) %> (<%= duration(location.duration) %>)
          <% if policy(@itinerary).destroy? %>
            <%= link_to '(âœŽ)', edit_itinerary_location_path(@itinerary, location) %>
            <%= link_to '(ðŸ§¨)', itinerary_location_path(@itinerary, location), method: :delete, data: { confirm: 'Are you sure?' } %>
          <% end %>
        </li>
        <br>
      <% end %>
    </ol>

    <%= link_to 'ðŸ”™', itineraries_path %>

    <% if policy(@itinerary).destroy? %>
      <%= link_to 'ðŸš®', @itinerary, method: :delete, data: { confirm: 'Are you sure?' } %>
    <% end %>
  </div>
  <div class="col-8">
    <div
      id="map"
      style="width: 100%;
      height: 600px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  </div>
</div>


