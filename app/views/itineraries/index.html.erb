<h1 id="index-h1">Itineraries</h1>

<%= render "shared/search" %>

<div class="index-container">
  <div class="cards">
    <% @itineraries.each do |itinerary| %>

        <div class="card-trip">
          <div class="index-click-map" data-markers="<%= itinerary.markers_method.to_json %>">
            <%= image_tag "bridge.jpg", alt: "alttext" %>
          </div>
          <div class="card-trip-infos">
            <div class="card-left">
              <h2 class="pb-1"><%= itinerary.name %></h2>

              <p>Short description here!</p>

              <%= link_to "Go on Itinerary", itinerary, class:"btn btn-primary btn-sm card-btn" %>
            </div>
            <div class="ratings-clock">
             <p class="pb-1"><%= rating(itinerary.reviews) %></p>
             <p class="pr-1"><i class="far fa-clock p-1"></i><%=duration(itinerary.duration) %></p>
            </div>
          </div>
        </div>

    <% end %>
  </div>
  <div
    id="map"
    class="map-index"
    style="width: 100%;
    height: 88vh;
    top: 53px;
    position: sticky;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
